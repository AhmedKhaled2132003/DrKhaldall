// ==UserScript==
// @name         Dr Ahmed Khaled ğŸ‘‘ | Ø³ÙƒØ±ÙŠØ¨Øª Ø¯.Ø£Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯
// @namespace    https://www.facebook.com/Dr.Ahmed.FamilyFarm
// @version      1.4
// @description  ÙˆØ§Ø¬Ù‡Ø© Ù…ØªØ·ÙˆØ±Ø© Ù„ÙØªØ­ Ø§Ù„ÙƒØ±ÙˆØªØŒ Ù…Ø­Ø·Ø© Ø§Ù„ØªÙÙƒÙŠÙƒØŒ ÙØªØ­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ø±Ø³Ø§Ù„ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ù‡Ù…Ø§Øª  ğŸ‘‘
// @author       Dr Ahmed Khaled ğŸ‘‘
// @match        *.centurygames.com/*
// @require https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js
// @grant        unsafeWindow
// @updateURL    https://raw.githubusercontent.com/ak2132003/DrKLDscript/main/DrKLDscript.user.js
// @downloadURL  https://raw.githubusercontent.com/ak2132003/DrKLDscript/main/DrKLDscript.user.js
// @run-at       document-end
// ==/UserScript==

(function () {
    'use strict';
(function () {
    'use strict';

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯
    const currentVersion = '1.4';
    fetch('https://github.com/ak2132003/allinone/raw/refs/heads/main/allscript.user.js')
      .then(response => response.text())
      .then(script => {
        const remoteVersion = script.match(/@version\s+([\d.]+)/)[1];
        if (remoteVersion !== currentVersion) {
          alert(`ÙŠÙˆØ¬Ø¯ ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø³ÙƒØ±Ø¨Øª! Ø§Ù„Ø¥ØµØ¯Ø§Ø± ${remoteVersion} Ù…ØªØ§Ø­.\nÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø§Ù„Ù…ÙŠØ²Ø§Øª.`);
        }
      })
      .catch(err => console.error('Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«:', err));
})();
    const drName = '';

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·
    const fontLink = document.createElement('link');
    fontLink.href = 'https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap';
    fontLink.rel = 'stylesheet';
    document.head.appendChild(fontLink);

    // Ø³ØªØ§ÙŠÙ„ Ø¹Ø§Ù…
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes fadeOut { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0.9); } }

.dr-panel {
    font-family: 'Cairo', sans-serif;
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.8), rgba(253, 224, 71, 0.6));
    backdrop-filter: blur(12px);
    box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    border-radius: 16px;
    padding: 25px;
    min-width: 320px;
    max-width: 600px;
    width: auto;
    display: none;
    flex-direction: column;
    align-items: center;
    z-index: 99999;
    box-sizing: border-box;
}
.dr-panel h3 {
    margin-bottom: 15px;
    font-size: 22px;
    color: #fff;
    text-shadow: 0 0 3px #000;
}
.dr-panel input, .dr-panel select, .dr-panel textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: none;
    border-radius: 8px;
    font-size: 15px;
}
.dr-panel button {
    background: linear-gradient(135deg, #4CAF50, #388E3C);
    color: black;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: transform 0.2s ease;
}
.dr-panel button:hover {
    transform: scale(1.05);
}
.dr-main-btn {
    position: fixed;
    bottom: 120px;
    right: 25px;
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: url('https://drahmedkhaled.neocities.org/%E2%80%94Pngtree%E2%80%94golden%20crown%20vector%20design_5415535-Photoroom.png') no-repeat center;
    background-size: contain;
    background-color: rgba(0, 0, 0, 0.6);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    font-size: 14px;
    font-weight: bold;
    font-family: 'Cairo', sans-serif;
    cursor: pointer;
    z-index: 9999;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    transition: transform 0.3s ease;
}
.dr-main-btn:hover {
    transform: scale(1.1);
}
.dr-menu {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    display: none;
    flex-direction: column;
    background: url('https://drahmedkhaled.neocities.org/Background%2011.png') no-repeat center;
    background-size: cover;
    backdrop-filter: blur(10px);
    border-radius: 12px;
    overflow: hidden;
    z-index: 9999;
    animation: fadeIn 0.3s ease;
}
.dr-menu button {
    background: none;
    border: none;
    padding: 12px 18px;
    font-size: 18px;
    color: black;
    text-shadow: 0 0 2px #000;
    font-family: 'Cairo', sans-serif;
    cursor: pointer;
    transition: background 0.2s ease;
}
.dr-menu button:hover {
    background: rgba(255,255,255,0.1);
}
.dr-submenu {
    display: none;
    flex-direction: row;
    background: rgba(255, 255, 255, 0.05);
    border-top: 1px solid rgba(255, 255, 255, 0.2);
    overflow: hidden;
    transition: max-height 0.3s ease, opacity 0.3s ease;
    max-height: 0;
    opacity: 0;
}
.dr-submenu.open {
    display: flex;
    max-height: 500px;
    opacity: 1;
}
.dr-submenu button {
    padding-left: 30px;
}
.close-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
    color: white;
    cursor: pointer;
    z-index: 100;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translate(-50%, -45%); }
    to { opacity: 1; transform: translate(-50%, -50%); }
}
`;
document.head.appendChild(style);

// ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
const mainBtn = document.createElement('div');
mainBtn.className = 'dr-main-btn';
mainBtn.innerHTML = `<span>${drName}<br></span>`;
document.body.appendChild(mainBtn);

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
const menu = document.createElement('div');
menu.className = 'dr-menu';

// Ø²Ø± Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ù„Ø¨ÙˆÙ… + Ù‚Ø§Ø¦Ù…Ø© ÙØ±Ø¹ÙŠØ©
const albumBtn = document.createElement('button');
albumBtn.textContent = 'ğŸ“‚ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…';

const subMenu = document.createElement('div');
subMenu.className = 'dr-submenu';
// Ø²Ø± Ù…Ù‡Ù…Ø© Ø¨Ù„ÙŠÙ†ÙƒÙˆ

// Ø²Ø± Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø©
const farmBtn = document.createElement('button');
farmBtn.textContent = 'ğŸŒ¾ ÙØªØ­ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ ';
farmBtn.onclick = () => showPanel('FarmAdventure');
menu.appendChild(farmBtn);
['cards', 'station', 'links', 'juicer', 'PurpleBird', 'Cream' ].forEach(id => {
    const btn = document.createElement('button');
    btn.textContent = {
        cards: 'ğŸ´ ÙØªØ­ Ø§Ù„ÙƒØ±ÙˆØª',
        station: 'ğŸ—ï¸ Ù…Ø­Ø·Ø© Ø§Ù„ØªÙÙƒÙŠÙƒ',
        links: 'ğŸ”— ÙØªØ­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·',
        juicer: 'ğŸ¥¤ Ø¢Ù„Ø© Ø§Ù„Ø¹ØµÙŠØ±',
        PurpleBird: 'ğŸ¦œ Ø·Ø§Ø¦Ø± Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ',
        Cream :'ğŸ¦ Ø§Ù„Ù‡ Ø§Ù„ÙƒØ±ÙŠÙ…Ø© Ø§Ù„Ø·Ø§Ø²Ø¬Ø©'
    }[id];
    btn.onclick = () => showPanel(id);
    subMenu.appendChild(btn);
});

// ØªØ­ÙƒÙ… ÙÙŠ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ© Ø¨Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†
albumBtn.onclick = () => {
    if (subMenu.classList.contains('open')) {
        subMenu.classList.remove('open');
    } else {
        subMenu.classList.add('open');
    }
};

// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø²Ø± ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
menu.appendChild(albumBtn);
menu.appendChild(subMenu);

// Ø²Ø± Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù‡Ù…Ø§Øª
const tokenBtn = document.createElement('button');
tokenBtn.textContent = 'ğŸ¯ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· (Ø§Ù„Ù…Ù‡Ù…Ø§Øª)';
tokenBtn.onclick = () => showPanel('token');
menu.appendChild(tokenBtn);

// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„ØµÙØ­Ø©
document.body.appendChild(menu);

// Ø§Ù„ØªØ­ÙƒÙ… Ø¨ÙØªØ­ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
mainBtn.onclick = () => {
    menu.style.display = (menu.style.display === 'flex') ? 'none' : 'flex';
};

// Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„ Ø§Ù„Ù†ÙˆØ§ÙØ°
const panels = {
    cards: createCardPanel(),
    station: createStationPanel(),
    links: createLinkPanel(),
    token: createTokenPanel(),
    juicer: createJuicerPanel(),
    PurpleBird: createPurpleBirdPanel(),
    Cream :createCreamPanel(),
 FarmAdventure: createFarmPanel()
};

// Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
function createFarmPanel() {
    const div = document.createElement('div');
    div.className = 'dr-panel';
    div.innerHTML = `
        <h3>ğŸŒ¾ ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„</h3>
        <div style="color:white;margin-bottom:15px;">
            ØªÙ†ÙÙŠØ° Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        </div>
        <button id="runFarm" style="background:linear-gradient(135deg,#28a745,#218838);">
            ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ°
        </button>
        <div id="farmStatus" style="color:white;margin-top:10px;"></div>
        <div class="close-btn" onclick="this.parentElement.style.display='none'">âœ–ï¸</div>
        <div style="text-align:center;color:white;font-size:14px;margin-top:10px;">ğŸ‘‘ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¯.Ø£Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯</div>
    `;

    // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø«Ø§Ø¨ØªØ©
    const fixedData = {
        method: "story_start",
        data_hash: "e2c7d5894ac548ad6d3efc6780f3e3ac",
        cur_sceneid: 0,
        base_story_type: "firecappedtitadventure"
    };

    // Ø§Ù„Ù†Ù‡Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØºÙŠØ±Ø©
    const variations = ['a1','a2','a3','b1','b2','b3','c1','c2','c3','d1','d2','d3','e1','e2','e3','f1','f2','f3'];

    // ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
    div.querySelector('#runFarm').onclick = async () => {
        const statusEl = div.querySelector('#farmStatus');
        statusEl.textContent = 'â³ Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„...';

        try {
            for (let i = 0; i < variations.length; i++) {
                const storyId = 1012773 + (i * 4);
                const requestData = {
                    data_hash: fixedData.data_hash,
                    cur_sceneid: fixedData.cur_sceneid,
                    story_type: fixedData.base_story_type + variations[i],
                    story_id: storyId
                };

                await unsafeWindow.NetUtils.request('story_start', requestData);
                await new Promise(resolve => setTimeout(resolve, 0)); // ØªØ£Ø®ÙŠØ± Ø¨ÙŠÙ† Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            }
            statusEl.textContent = 'âœ… ØªÙ… ØªÙ†ÙÙŠØ° Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­!';
        } catch (error) {
            statusEl.textContent = 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ°';
            console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø©:', error);
        }
    };

    document.body.appendChild(div);
    return div;
}

function showPanel(id) {
    Object.values(panels).forEach(panel => panel.style.display = 'none');
    panels[id].style.display = 'flex';
    menu.style.display = 'none';
}

    function createCardPanel() {
        const types = { 'Ø£Ø®Ø¶Ø±': 0x3ACFE, 'Ø£ØµÙØ±': 0x3ACFF, 'ÙØ§Ø®Ø±': 0x3AD00, 'Ø­ØµØ±ÙŠ': 0x3AD01, 'Ù…Ø¤Ù‚Øª': 0x3AD02 };
        const div = document.createElement('div');
        div.className = 'dr-panel';
        div.innerHTML = `
            <h3>ÙØªØ­ Ø§Ù„ÙƒØ±ÙˆØª</h3>
            <select id="cardType">${Object.entries(types).map(([k, v]) => `<option value="${v}">${k}</option>`)}</select>
            <input type="number" id="cardQty" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØ±ÙˆØª">
            <button id="runCard">ğŸš€ ØªÙ†ÙÙŠØ°</button>
            <div id="cardMsg" style="color:white;margin-top:10px;"></div>
<div class="close-btn" onclick="this.parentElement.style.display='none'">âœ–ï¸</div>
        `;
        div.querySelector('#runCard').onclick = async () => {
            const id = +div.querySelector('#cardType').value;
            const qty = +div.querySelector('#cardQty').value;
            if (!id || !qty) return alert("âŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª");
            div.querySelector('#cardMsg').textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...';
            await unsafeWindow.NetUtils.request('Activity/AlbumEvent', {
                action: 'useItem', itemId: id, qty: qty.toString(), needResponse: 'Activity/AlbumEvent1'
            });
            div.querySelector('#cardMsg').textContent = 'âœ… ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°!';
        };
        document.body.appendChild(div);
        return div;
    }

function createStationPanel() {
    const div = document.createElement('div');
    div.className = 'dr-panel';
    div.innerHTML = `
        <h3>Ù…Ø­Ø·Ø© Ø§Ù„ØªÙÙƒÙŠÙƒ</h3>
        <div style="color:white;margin-bottom:10px;">ğŸ“Œ Ø´Ø±ÙˆØ· Ø§Ù„ØªØ´ØºÙŠÙ„:</div>
        <ul style="color:white; font-size: 16px">
            <li>Ù¡. ğŸ™Œ Ù„Ø§ ØªÙ†Ø³ÙˆØ§ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù„ÙŠ Ø¨Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙˆØ§Ù„Ø³Ø¯Ø§Ø¯ØŒ ÙˆÙ‡Ø°Ø§ Ø£Ù‡Ù… Ø´Ø±Ø· Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª ğŸ˜„</li>
            <li>Ù¢. ğŸ§¹ ØªÙØ±ÙŠØº Ù¤ ØªØ±Ø¨Ø© Ù…Ù† Ø§Ù„Ù…Ù†Ø·Ù‚Ø© 0,0</li>
            <li>Ù£. ğŸ—ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙƒ Ù…Ø­Ø·Ø© ØªÙÙƒÙŠÙƒ Ø¨Ø§Ù„Ø£Ø³Ø§Ø³</li>
            <li>Ù¤. ğŸ ØªÙˆØ§ÙØ± Ø§Ù„Ù…ÙˆØ§Ø¯ (Ø­Ø¨Ù„ Ø§Ù„ØªÙÙƒÙŠÙƒ ÙÙŠ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§) â€“ Ù„ÙƒÙ„ Ù…Ø­Ø·Ø© ÙˆØ§Ø­Ø¯Ø© ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ (Ù¥) Ø­Ø¨Ù„ ØªÙÙƒÙŠÙƒ</li>
        </ul>
        <input type="number" id="coins" placeholder="ğŸ’° Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©">
        <span>Ø£Ùˆ</span>
        <input type="number" id="repeats" placeholder="ğŸ” Ø§Ù„ØªÙƒØ±Ø§Ø±">
        <button id="runStation">ğŸš€ ØªÙ†ÙÙŠØ°</button>
        <div id="stationMsg" style="color:white;margin-top:10px;"></div>
        <div class="close-btn" onclick="this.parentElement.style.display='none'">âœ–ï¸</div>
        <div style="text-align:center;color:white;font-size:14px;margin-top:10px;">ğŸ‘‘ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¯.Ø£Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯</div>
    `;

    div.querySelector('#runStation').onclick = async () => {
        const coins = +div.querySelector('#coins').value;
        const repeats = +div.querySelector('#repeats').value;
        const times = repeats || Math.ceil(coins / 8);
        if (!coins && !repeats) return alert("âš ï¸ ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø£Ùˆ Ø§Ù„ØªÙƒØ±Ø§Ø±!");

        let unique_id = 1000;
        div.querySelector('#stationMsg').textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...';

        // Ø¥Ø±Ø³Ø§Ù„ ÙƒÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ÙÙŠ ÙˆÙ‚Øª ÙˆØ§Ø­Ø¯ Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±
        const promises = [];
        for (let i = 1; i <= times; i++) {
            // Ø¹Ù…Ù„ÙŠØ§Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ØµØ±ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ (5 Ù…Ø±Ø§Øª) ÙˆØ­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± ÙƒÙ„Ù‡Ø§ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù„Ø­Ø¸Ø©
            const addObjectPromise = unsafeWindow.NetUtils.request('add_object.save_data', {
                unique_id, id: 0x33b50, x: 0, y: 0, flip: 0, is_storage: false, is_gift: false, is_circle: false, daily_limit: false
            });

            const useGiftPromises = [];
            for (let j = 1; j <= 5; j++) {
                useGiftPromises.push(unsafeWindow.NetUtils.request('use_gift.save_data', { id: 0x33b51, target_id: 0x33b50, target_x: 0, target_y: 0 }));
            }

            const removeObjectPromise = unsafeWindow.NetUtils.request('remove_object.save_data', { id: 0x33b50, x: 0, y: 0, flip: 0 });

            // Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ÙÙŠ Promise.all Ù„ØªÙ†ÙÙŠØ°Ù‡Ø§ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù„Ø­Ø¸Ø©
            promises.push(
                Promise.all([
                    addObjectPromise,
                    ...useGiftPromises,
                    removeObjectPromise
                ])
            );

            unique_id++;
        }

        // ØªÙ†ÙÙŠØ° Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠØ©
        Promise.all(promises).then(() => {
            div.querySelector('#stationMsg').textContent = 'âœ… ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°!';
        }).catch(err => {
            div.querySelector('#stationMsg').textContent = 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ°!';
            console.error(err);
        });
    };

    document.body.appendChild(div);
    return div;
}



    function createLinkPanel() {
        const div = document.createElement('div');
        div.className = 'dr-panel';
        div.innerHTML = `
            <h3>ÙØªØ­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</h3>
            <textarea id="linksArea" rows="5" placeholder="Ø£Ù„ØµÙ‚ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù‡Ù†Ø§..." style="resize: none;"></textarea>
            <button id="launchLinks">ğŸš€ ÙØªØ­</button>
            <div class="close-btn" onclick="this.parentElement.style.display='none'">âœ–ï¸</div>
<div style="text-align:center;color:white;font-size:14px;margin-top:10px;">ğŸ‘‘ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¯.Ø£Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯</div>
        `;
        div.querySelector('#launchLinks').onclick = () => {
            const text = div.querySelector('#linksArea').value;
            const links = [...text.matchAll(/https?:\/\/[^\s<>"]+/g)].map(m => m[0]);
            if (!links.length) return alert("âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±ÙˆØ§Ø¨Ø·!");
            links.forEach((l, i) => setTimeout(() => window.open(l, "_blank"), i * 300));
        };
        document.body.appendChild(div);
        return div;
    }

     function createJuicerPanel() {
    const div = document.createElement('div');
    div.className = 'dr-panel';
    div.innerHTML = `
        <div style="font-weight: bold; font-size: 18px; text-align: center; color: white;">ğŸ¥¤ Ø¢Ù„Ø© Ø§Ù„Ø¹ØµÙŠØ± </div>
        <div style="text-align: center; margin-top: 12px;">
            <label for="juicerRepeats">Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: </label>
            <input id="juicerRepeats" type="number" min="1" value="1" style="width: 60px;">
        </div>
        <button id="runJuicer" style="display: block; margin: 20px auto; padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">
            ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
        </button>
            <div class="close-btn" onclick="this.parentElement.style.display='none'">âœ–ï¸</div>
<div style="text-align:center;color:white;font-size:14px;margin-top:10px;">ğŸ‘‘ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¯.Ø£Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯</div>
        <div id="juicerMsg" style="text-align: center; color: green; display: none;">âœ… ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡!</div>
    `;
    div.querySelector('#runJuicer').onclick = async () => {
        const repeats = +div.querySelector('#juicerRepeats').value;
        if (!repeats) return alert("âš ï¸ ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±!");
        let unique_id = Date.now();  // Ù„ØªÙˆÙ„ÙŠØ¯ unique_id Ø¨Ø´ÙƒÙ„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
        div.querySelector('#juicerMsg').textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...';
        div.querySelector('#juicerMsg').style.display = 'block';
        try {
            for (let i = 1; i <= repeats; i++) {
                // Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„Ø¹ØµÙŠØ±
                await unsafeWindow.NetUtils.request('add_object.save_data', {
                    unique_id, id: 0x30F11, x: 0, y: 0, flip: 0, is_storage: false, is_gift: false, is_circle: false, daily_limit: false
                });

                // ØªÙ†ÙÙŠØ° 5 Ù…Ø±Ø§Øª: use_gift.save_data Ø§Ù„Ø£ÙˆÙ„
                for (let j = 1; j <= 5; j++) {
                    await unsafeWindow.NetUtils.request('use_gift.save_data', {
                        id: 0x2584, target_id: 0x30F11, target_x: 0, target_y: 0
                    });
                }

                // ØªÙ†ÙÙŠØ° 5 Ù…Ø±Ø§Øª: use_gift.save_data Ø§Ù„Ø«Ø§Ù†ÙŠ
                for (let j = 1; j <= 5; j++) {
                    await unsafeWindow.NetUtils.request('use_gift.save_data', {
                        id: 0x2585, target_id: 0x30F11, target_x: 0, target_y: 0
                    });
                }

                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹ØµÙŠØ± Ø¨Ø¹Ø¯ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
                await unsafeWindow.NetUtils.request('remove_object.save_data', {
                    id: 0x30F11, x: 0, y: 0, flip: 0
                });

                unique_id++;  // ØªØ­Ø¯ÙŠØ« unique_id Ù„Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
            }

            div.querySelector('#juicerMsg').textContent = 'âœ… ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°!';
        } catch (error) {
            console.error('Error occurred during juicer operation:', error);
            div.querySelector('#juicerMsg').textContent = 'âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ°.';
            div.querySelector('#juicerMsg').style.color = 'red';
        }
    };
    document.body.appendChild(div);
    return div;
}

function createPurpleBirdPanel() {
    const div = document.createElement('div');
    div.className = 'dr-panel';
    div.innerHTML = `
        <div style="font-weight: bold; font-size: 18px; text-align: center; color: white;">ğŸ¦œ Ø·Ø§Ø¦Ø± Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ</div>
        <div style="text-align: center; margin-top: 12px;">
            <label for="birdRepeats">Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: </label>
            <input id="birdRepeats" type="number" min="1" value="1" style="width: 60px;">
        </div>
        <button id="runBird" style="display: block; margin: 20px auto; padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">
            ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
        </button>
        <div class="close-btn" onclick="this.parentElement.style.display='none'">âœ–ï¸</div>
        <div style="text-align:center;color:white;font-size:14px;margin-top:10px;">ğŸ‘‘ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¯.Ø£Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯</div>
        <div id="birdMsg" style="text-align: center; color: green; display: none;">âœ… ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡!</div>
    `;

    div.querySelector('#runBird').onclick = async () => {
        const repeats = +div.querySelector('#birdRepeats').value;
        if (!repeats) return alert("âš ï¸ ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±!");
        let unique_id = Date.now();  // Ù„ØªÙˆÙ„ÙŠØ¯ unique_id Ø¨Ø´ÙƒÙ„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
        div.querySelector('#birdMsg').textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...';
        div.querySelector('#birdMsg').style.display = 'block';

        try {
            for (let i = 1; i <= repeats; i++) {
                console.log(`ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø±Ù‚Ù… ${i}`);

                // Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ø¦Ø± Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ
                const addResponse = await unsafeWindow.NetUtils.request('add_object.save_data', {
                    unique_id, id: 0x30FA3, x: 0, y: 0, flip: 0, is_storage: false, is_gift: false, is_circle: false, daily_limit: false
                });
                console.log("Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ø¦Ø± Ø§Ù„Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ: ", addResponse);

                 for (let j = 1; j <= 5; j++) {
                    await unsafeWindow.NetUtils.request('use_gift.save_data', {
                        id: 0x30FA2, target_id: 0x30FA3, target_x: 0, target_y: 0
                    });
                }

                // Ø¥Ø²Ø§Ù„Ø© Ø·Ø§Ø¦Ø± Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
                const removeResponse = await unsafeWindow.NetUtils.request('remove_object.save_data', {
                    id: 0x30FA3, x: 0, y: 0, flip: 0
                });
                console.log("Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø·Ø§Ø¦Ø± Ø§Ù„Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ: ", removeResponse);

                unique_id++;  // ØªØ­Ø¯ÙŠØ« unique_id Ù„Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
            }

            div.querySelector('#birdMsg').textContent = 'âœ… ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°!';
        } catch (error) {
            console.error('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:', error);
            div.querySelector('#birdMsg').textContent = 'âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ°.';
            div.querySelector('#birdMsg').style.color = 'red';
        }
    };

    document.body.appendChild(div);
    return div;
}

function createCreamPanel() {
    const div = document.createElement('div');
    div.className = 'dr-panel';
    div.innerHTML = `
        <div style="font-weight: bold; font-size: 18px; text-align: center; color: white;">ğŸ¦ Ø¢Ù„Ø© Ø§Ù„ÙƒØ±ÙŠÙ…Ø© Ø§Ù„Ø·Ø§Ø²Ø¬Ø© </div>
        <div style="text-align: center; margin-top: 12px;">
            <label for="creamRepeats">Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: </label>
            <input id="creamRepeats" type="number" min="1" value="1" style="width: 60px;">
        </div>
        <button id="runCream" style="display: block; margin: 20px auto; padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">
            ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
        </button>
        <div class="close-btn" onclick="this.parentElement.style.display='none'">âœ–ï¸</div>
        <div style="text-align:center;color:white;font-size:14px;margin-top:10px;">ğŸ‘‘ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¯.Ø£Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯</div>
        <div id="creamMsg" style="text-align: center; color: green; display: none;">âœ… ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡!</div>
    `;
    div.querySelector('#runCream').onclick = async () => {
        const repeats = +div.querySelector('#creamRepeats').value;
        if (!repeats) return alert("âš ï¸ ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±!");
        let unique_id = Date.now();
        div.querySelector('#creamMsg').textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...';
        div.querySelector('#creamMsg').style.display = 'block';

        try {
            for (let i = 1; i <= repeats; i++) {
                // 1ï¸âƒ£ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¢Ù„Ø©
                await unsafeWindow.NetUtils.request('add_object.save_data', {
                    unique_id,
                    id: 0x33E51, // ØªØ£ÙƒØ¯ Ù…Ù† ID Ø¢Ù„Ø© Ø§Ù„ÙƒØ±ÙŠÙ…Ø© Ø§Ù„ÙØ¹Ù„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø®ØªÙ„Ù
                    x: 0,
                    y: 0,
                    flip: 0,
                    is_storage: false,
                    is_gift: false,
                    is_circle: false,
                    daily_limit: false
                });

                // 2ï¸âƒ£ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰
                await unsafeWindow.NetUtils.request('finish_invite_object.save_data', {
                    id: 0x33E51,
                    x: 0,
                    y: 0,
                    flipped: 0,
                    needResponse: "finish_invite_object.save_data",
                    cur_sceneid: 1
                });

                // 3ï¸âƒ£ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
                await unsafeWindow.NetUtils.request('finish_spend_rp_object.save_data', {
                    target_id: 0x33E51,
                    target_x: 0,
                    target_y: 0,
                    target_scene: 1,
                    type: "materials",
                    needResponse: "finish_spend_rp_object.save_data",
                    cur_sceneid: 1
                });

                // 4ï¸âƒ£ Ø­Ø°Ù Ø§Ù„Ø¢Ù„Ø©
                await unsafeWindow.NetUtils.request('remove_object.save_data', {
                    id: 0x33E51,
                    x: 0,
                    y: 0,
                    flip: 0
                });

                unique_id++; // ØªØºÙŠÙŠØ± unique_id Ù„ÙƒÙ„ ØªÙƒØ±Ø§Ø±
            }

            div.querySelector('#creamMsg').textContent = 'âœ… ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°!';
        } catch (error) {
            console.error('Error during cream operation:', error);
            div.querySelector('#creamMsg').textContent = 'âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ°.';
            div.querySelector('#creamMsg').style.color = 'red';
        }
    };

    document.body.appendChild(div);
    return div;
}

function createTokenPanel() {
    const div = document.createElement('div');
    div.className = 'dr-panel';
    div.innerHTML = `
        <h3>ğŸ¯ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· (Ø§Ù„Ù…Ù‡Ù…Ø§Øª)</h3>
        <select id="missionSelect" style="margin-bottom:10px;">
            <option value="ColorSphere">ÙƒØ±Ø© Ø³Ø­Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù† </option>
            <option value="PinballGame">Ù…Ù‡Ù…Ø© Ø¨Ù„ÙŠÙ†ÙƒÙˆ </option>
            <option value="MysteryShopKeeper">Ù…Ù‡Ù…Ø© Ø§Ù„ØªØ§Ø¬Ø±</option>
        </select>
        <textarea id="ssidInput" placeholder="ssid1        ÙˆÙ„ÙˆØ­Ø¨ÙŠØª ØªÙƒØªØ¨ Ø§Ø³Ù… Ø¬Ù…Ø¨Ù‡(Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
ssid2        ÙˆÙ„ÙˆØ­Ø¨ÙŠØª ØªÙƒØªØ¨ Ø§Ø³Ù… Ø¬Ù…Ø¨Ù‡(Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
ssid3        ÙˆÙ„ÙˆØ­Ø¨ÙŠØª ØªÙƒØªØ¨ Ø§Ø³Ù… Ø¬Ù…Ø¨Ù‡(Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"
            style="width: 100%; height: 100px; margin-top: 8px; resize: vertical;"></textarea>
        <div style="display: flex; gap: 8px; margin-top: 10px;">
            <button id="sendBtn">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„</button>
            <button id="receiveBtn">ğŸ“¥ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„</button>
        </div>
        <div id="loadingSpinner" style="display:none;margin-top:10px;color:white;">ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...</div>
        <div style="text-align:center;color:white;font-size:14px;margin-top:10px;">ğŸ‘‘ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¯.Ø£Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯</div>
        <div class="close-btn" onclick="this.parentElement.style.display='none'">âœ–ï¸</div>
    `;
    document.body.appendChild(div);

    const ssidList = [];

    const sleep = ms => new Promise(r => setTimeout(r, ms));

    async function handleAction(actionType) {
        const input = div.querySelector('#ssidInput').value.trim();
        const activity = div.querySelector('#missionSelect').value;
        const spinner = div.querySelector('#loadingSpinner');

        if (!input || !activity) {
            return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ SSID ÙˆØ§Ø®ØªØ± Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©");
        }

        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø· Ù…Ù† Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¯Ø®Ù„
        const ssids = input.split('\n')
            .map(line => line.trim().match(/\d+/))  // Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªØ¹Ø¨ÙŠØ± Ù…Ù†ØªØ¸Ù… Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·
            .filter(Boolean)  // ØªØµÙÙŠØ© Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ§Ø±ØºØ©
            .map(match => match[0]);  // Ø£Ø®Ø° Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·

        if (ssids.length === 0) {
            return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ SSID ØµØ­ÙŠØ­ ÙÙŠ ÙƒÙ„ Ø³Ø·Ø±");
        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù€ SSID Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        ssids.forEach(ssid => {
            if (!ssidList.includes(ssid)) {
                ssidList.push(ssid);
            }
        });

        spinner.style.display = 'block';

        for (const ssid of ssids) {
            try {
                await unsafeWindow.NetUtils.request('Activity/SharingToken', {
                    action: actionType,
                    activity,
                    [`${actionType === 'send' ? 'to' : 'from'}Snsids`]: [ssid],
                    needResponse: actionType === 'send' ? 'Activity/SharingToken' : 'Activity/SharingToken3',
                    ...(actionType === 'accept' ? { opTime: 1011.327 } : { cur_sceneid: 2 })
                });
                await sleep(0);
            } catch (e) {
                console.error(`${actionType === 'send' ? 'ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„' : 'ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„'} Ù„Ù€ ${ssid}:`, e);
            }
        }

        spinner.style.display = 'none';
        alert(`âœ… ØªÙ… ${actionType === 'send' ? 'Ø¥Ø±Ø³Ø§Ù„' : 'Ø§Ø³ØªÙ‚Ø¨Ø§Ù„'} Ø§Ù„ØªÙˆÙƒÙŠÙ†Ø§Øª Ù„Ù…Ù‡Ù…Ø© (${activity}) Ø¨Ù†Ø¬Ø§Ø­!\nÙ…Ø¹ ØªØ­ÙŠØ§ØªÙŠ\nAhmed Khaled`);
    }

    div.querySelector('#sendBtn').onclick = () => handleAction('send');
    div.querySelector('#receiveBtn').onclick = () => handleAction('accept');

    return div;
}


})();
